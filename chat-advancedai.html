<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GoldenSpaceAI ¬∑ Advanced Assistant</title>
<style>
:root{
  --gold1:#ffd700;--gold2:#e6c200;--gold3:#b89700;
  --text:#faf7e8;--muted:#c8b88a;
  --bg:#05060a;
  --glass:rgba(255,255,255,.08);
  --ring:rgba(255,215,0,.35);
}
body{
  margin:0;font-family:system-ui,Segoe UI,Roboto;
  color:var(--text);
  background:
    radial-gradient(1000px 800px at 75% -20%,rgba(255,215,0,.15),transparent 40%),
    radial-gradient(800px 600px at 10% 120%,rgba(255,215,0,.05),transparent 45%),
    #05060a;
  background-attachment:fixed;overflow:hidden;
}
.theme-dark body{
  background:
    radial-gradient(900px 700px at 80% -10%,rgba(255,215,0,.15),transparent 40%),
    radial-gradient(900px 700px at 10% 130%,rgba(255,215,0,.05),transparent 50%),
    #03040a;
}
.stars{position:fixed;inset:0;z-index:-1;background:url('https://i.ibb.co/XpS7X0f/stars-bg.png') repeat;opacity:.25;}
header{
  display:flex;align-items:center;gap:.7rem;padding:14px 18px;
  background:rgba(0,0,0,.4);backdrop-filter:blur(8px);
  border-bottom:1px solid rgba(255,255,255,.1);
}
.logo{width:30px;height:30px;border-radius:50%;
  background:conic-gradient(from 210deg,var(--gold1),var(--gold2),var(--gold3),var(--gold1));
  box-shadow:0 0 12px rgba(255,215,0,.25);
}
header span.title{font-weight:700;font-size:1.1em}
main{height:calc(100vh - 160px);overflow:auto;padding:16px;scroll-behavior:smooth}
.msg{max-width:min(780px,92%);padding:14px 16px;border-radius:14px;margin:10px 0;
  border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(6px);}
.msg.user{margin-left:auto;background:linear-gradient(180deg,rgba(255,215,0,.12),rgba(255,215,0,.06));}
.msg.ai{background:rgba(12,12,16,.55);}
.msg small{opacity:.7;font-size:.75rem;margin-bottom:4px;display:block}
.composer-wrap{position:fixed;bottom:18px;left:0;right:0;display:flex;justify-content:center}
.composer{width:min(980px,94%);display:flex;align-items:center;gap:8px;
  padding:10px;background:var(--glass);backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,.08);border-radius:18px;}
textarea{flex:1;resize:none;min-height:56px;max-height:140px;padding:12px 14px;
  border-radius:12px;background:rgba(255,255,255,.06);color:var(--text);
  border:1px solid rgba(255,255,255,.15);outline:none;font-size:15px;}
.btn{height:52px;width:52px;border:none;border-radius:999px;cursor:pointer;
  background:rgba(255,255,255,.08);display:grid;place-items:center;transition:.2s;}
.btn:hover{background:rgba(255,255,255,.15);}
.btn.gold{background:linear-gradient(45deg,var(--gold1),var(--gold2));color:#141209;font-weight:800;
  box-shadow:0 0 12px rgba(255,215,0,.3);}
.btn.gold.glow{animation:glow 2s infinite alternate;}
@keyframes glow{from{box-shadow:0 0 10px rgba(255,215,0,.4);}to{box-shadow:0 0 22px rgba(255,215,0,.8);}}
.spinner{width:20px;height:20px;border-radius:50%;border:2px solid rgba(255,255,255,.2);
  border-top-color:var(--gold1);animation:spin 1s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
/* lock overlay */
.lock{position:fixed;inset:0;background:rgba(0,0,0,.8);
display:none;justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(12px);}
.lock .card{background:rgba(10,10,14,.9);padding:32px;border:2px solid gold;border-radius:18px;
color:white;text-align:center;max-width:400px;}
.lock h2{color:gold;margin:0 0 10px;}
.lock button{margin-top:14px;padding:12px 20px;border:none;border-radius:8px;font-weight:700;cursor:pointer;}
.unlock{background:linear-gradient(45deg,#ffd700,#ffed4e);color:#000;}
.cancel{background:#333;color:#fff;}
</style>
</head>
<body>
<div class="stars"></div>
<header><div class="logo"></div><span class="title">GoldenSpaceAI ¬∑ Advanced</span></header>

<main id="chat"><div class="msg ai"><small>GoldenSpaceAI</small>
Welcome back ‚ú®  Press <b>üß† Deep Think</b> to enter advanced GPT-5 mode, or start chatting below.
</div></main>

<div class="composer-wrap">
  <div class="composer">
    <button id="plusBtn" class="btn">Ôºã</button>
    <textarea id="prompt" placeholder="Type your message..."></textarea>
    <button id="uploadBtn" class="btn" title="Upload file">üìé</button>
    <button id="imageBtn" class="btn" title="Generate image">üñºÔ∏è</button>
    <button id="deepThinkBtn" class="btn gold glow" title="Deep Think (GPT-5-mini)">üß†</button>
    <button id="micBtn" class="btn" title="Voice">üé§</button>
    <button id="sendBtn" class="btn gold" title="Send">‚û§</button>
  </div>
</div>

<!-- LOCK OVERLAY -->
<div id="lock" class="lock">
  <div class="card">
    <h2>Advanced AI Chat Locked</h2>
    <p>Unlock this feature for <b>10 G / month</b> to access GPT-5, image generation & file vision.</p>
    <div id="lockStatus" style="margin:10px 0;color:gold;font-weight:600"></div>
    <button id="unlockBtn" class="unlock">Unlock for 10 G</button>
    <button id="cancelBtn" class="cancel">Cancel</button>
  </div>
</div>

<script>
const chat=document.getElementById("chat");
const promptEl=document.getElementById("prompt");
const sendBtn=document.getElementById("sendBtn");
const deepThinkBtn=document.getElementById("deepThinkBtn");
const imageBtn=document.getElementById("imageBtn");
const uploadBtn=document.getElementById("uploadBtn");
const lock=document.getElementById("lock");
const unlockBtn=document.getElementById("unlockBtn");
const cancelBtn=document.getElementById("cancelBtn");
let currentModel="gpt-4o";
let unlocked=false;

/* helpers */
function addMsg(role,text){
  const m=document.createElement("div");m.className="msg "+role;
  const small=document.createElement("small");small.textContent=role==="user"?"You":"GoldenSpaceAI";
  m.append(small);
  const div=document.createElement("div");div.innerHTML=text.replace(/\n/g,"<br>");
  m.append(div);chat.append(m);chat.scrollTop=chat.scrollHeight;
}

/* spinner */
function spinner(){const s=document.createElement("div");s.className="msg ai";
s.innerHTML='<small>GoldenSpaceAI</small><div class="spinner"></div>';chat.append(s);chat.scrollTop=chat.scrollHeight;return s;}

async function checkAccess(){
 const res=await fetch("/api/feature-status?feature=premium_monthly");
 const d=await res.json();
 if(d.unlocked){unlocked=true;}else{lock.style.display="flex";}
}
checkAccess();

/* unlock flow */
unlockBtn.onclick=async()=>{
 unlockBtn.disabled=true;unlockBtn.textContent="Processing...";
 const r=await fetch("/api/unlock-feature",{method:"POST",headers:{"Content-Type":"application/json"},
 body:JSON.stringify({feature:"premium_monthly",cost:10})});
 const j=await r.json();
 if(j.success){document.getElementById("lockStatus").textContent="‚úÖ Unlocked!";setTimeout(()=>{lock.style.display="none";unlocked=true;},1500);}
 else{document.getElementById("lockStatus").textContent="‚ùå "+(j.error||"Failed");unlockBtn.disabled=false;unlockBtn.textContent="Unlock for 10 G";}
};
cancelBtn.onclick=()=>{lock.style.display="none";};

/* deep think */
deepThinkBtn.onclick=()=>{
  if(!unlocked)return lock.style.display="flex";
  currentModel="gpt-5-mini";
  addMsg("ai","üß† Deep Think mode activated (GPT-5-mini)");
};

/* send */
sendBtn.onclick=()=>sendMsg();
promptEl.addEventListener("keydown",e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();sendMsg();}});
async function sendMsg(){
 if(!unlocked)return lock.style.display="flex";
 const text=promptEl.value.trim();if(!text)return;
 addMsg("user",text);promptEl.value="";
 const s=spinner();
 const res=await fetch("/chat-advanced-ai",{method:"POST",headers:{"Content-Type":"application/json"},
 body:JSON.stringify({q:text,model:currentModel})});
 const j=await res.json();
 chat.removeChild(s);
 addMsg("ai",j.reply||j.answer||"[No reply]");
}
</script>
</body>
</html>
