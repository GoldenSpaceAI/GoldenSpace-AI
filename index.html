<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta name="theme-color" content="#0a0e15" />
    <title>GoldenSpaceAI ‚Ä¢ Home</title>
    <link rel="icon" href="/favicon.ico" />
    <style>
      :root {
        --bg: #0a0e15;
        --panel: #0f1624; /* deep navy */
        --panel2: #0b1320; /* darker */
        --border: #1f2a40; /* cool slate */
        --text: #e7f4e9;
        --muted: #cfc6a5;
        --gold: #f6c64a;
        --gold2: #eb8b36;
        --shadow: 0 22px 70px rgba(0, 0, 0, 0.5);
        --radius: 18px;
        --max: 1200px;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        color: var(--text);
        font:
          16px/1.6 Inter,
          ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Arial,
          sans-serif;
        /* Space image + golden glow overlay (swap URL if you have your own) */
        background:
          linear-gradient(
            180deg,
            rgba(10, 14, 21, 0.85),
            rgba(10, 14, 21, 0.78)
          ),
          radial-gradient(
            1200px 600px at 80% -10%,
            rgba(246, 198, 74, 0.18),
            transparent 60%
          ),
          url("https://images.unsplash.com/photo-1457369804613-52c61a468e7d?q=80&w=2000&auto=format&fit=crop")
            center/cover no-repeat fixed;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      a {
        color: inherit;
        text-decoration: none;
      }

      /* ===== Top brand bar ===== */
      .top {
        position: sticky;
        top: 0;
        z-index: 30;
        backdrop-filter: blur(10px);
        background: linear-gradient(
          180deg,
          rgba(10, 14, 21, 0.85),
          rgba(10, 14, 21, 0.5) 60%,
          transparent
        );
        border-bottom: 1px solid var(--border);
        padding: max(12px, env(safe-area-inset-top)) 16px 10px;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 900;
        letter-spacing: 0.4px;
        color: var(--gold);
        font-size: clamp(20px, 2.2vw, 26px);
        text-shadow: 0 0 16px rgba(246, 198, 74, 0.25);
      }
      .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: radial-gradient(
          circle at 30% 30%,
          #ffd86a,
          #f6c64a 50%,
          #eb8b36 90%
        );
        box-shadow: 0 0 18px rgba(246, 198, 74, 0.5);
      }
      .spacer {
        flex: 1;
      }
      .toplinks {
        display: flex;
        gap: 8px;
      }
      .toplinks a {
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid var(--border);
        color: var(--muted);
        font-weight: 800;
        font-size: 14px;
      }
      @media (max-width: 880px) {
        .toplinks {
          display: none;
        }
      }

      /* ===== Shell layout ===== */
      .wrap {
        max-width: var(--max);
        margin: 22px auto;
        padding: 0 16px;
      }
      .layout {
        display: grid;
        gap: 18px;
        grid-template-columns: 280px 1fr 230px; /* left panels, hero, right nav */
      }
      @media (max-width: 1100px) {
        .layout {
          grid-template-columns: 260px 1fr 200px;
        }
      }
      @media (max-width: 980px) {
        .layout {
          grid-template-columns: 1fr;
        }
      }

      /* ===== Left column: feature panels ===== */
      .leftCol {
        display: grid;
        gap: 14px;
        align-content: start;
      }
      .tile {
        background: linear-gradient(180deg, var(--panel), var(--panel2));
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 14px 16px;
        box-shadow: var(--shadow);
      }
      .tile h3 {
        margin: 0 0 4px;
        font-size: 16px;
        color: var(--gold);
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .tile p {
        margin: 0;
        color: #dfe7f1;
        font-size: 14px;
      }

      /* ===== Center: hero ===== */
      .hero {
        background: linear-gradient(
          180deg,
          rgba(14, 21, 34, 0.9),
          rgba(11, 17, 28, 0.9)
        );
        border: 1px solid var(--border);
        border-radius: calc(var(--radius) + 2px);
        padding: clamp(18px, 4vw, 26px);
        box-shadow: var(--shadow);
        text-align: center;
      }
      .hero h1 {
        margin: 6px 0 10px;
        font-size: clamp(26px, 5.2vw, 54px);
        line-height: 1.08;
        color: #fff7dc;
      }
      .hero p {
        margin: 0 0 16px;
        color: #f2ecd2;
        font-size: clamp(14px, 2.2vw, 18px);
      }
      .cta {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: center;
      }
      .btn {
        display: inline-block;
        padding: 12px 16px;
        border-radius: 12px;
        font-weight: 900;
        cursor: pointer;
        border: 1px solid rgba(0, 0, 0, 0.2);
      }
      .btn.gold {
        background: linear-gradient(180deg, var(--gold), var(--gold2));
        color: #1b1300;
        box-shadow: 0 10px 26px rgba(246, 198, 74, 0.28);
      }
      .btn.ghost {
        background: transparent;
        color: var(--muted);
        border: 1px solid var(--border);
      }
      .quickRow {
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .chip {
        display: inline-block;
        padding: 8px 12px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid var(--border);
        color: #c9d1e6;
        font-weight: 800;
        font-size: 14px;
      }

      /* ===== Right column: vertical nav + Google ===== */
      .rightCol {
        position: sticky;
        top: 86px;
        align-self: start;
        display: grid;
        gap: 12px;
        height: fit-content;
      }
      .sideNav {
        background: linear-gradient(180deg, var(--panel), var(--panel2));
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 12px;
        box-shadow: var(--shadow);
        display: grid;
        gap: 10px;
      }
      .navbtn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px 12px;
        border-radius: 999px;
        border: 1px solid var(--border);
        color: #d7e2f4;
        background: rgba(255, 255, 255, 0.03);
        font-weight: 900;
      }
      .navbtn:hover {
        border-color: #2a3c5f;
      }
      .google {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: #fff;
        color: #333;
        border-radius: 999px;
        padding: 10px 12px;
        font-weight: 800;
        border: 1px solid rgba(0, 0, 0, 0.12);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
      }
      .google img {
        width: 18px;
        height: 18px;
      }
      .google:hover {
        filter: brightness(1.02);
      }

      /* ===== Footer ===== */
      footer {
        max-width: var(--max);
        margin: 24px auto 36px;
        padding: 0 16px;
        color: #aeb7c5;
        font-size: 12px;
        display: flex;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
        border-top: 1px solid var(--border);
        padding-top: 14px;
      }

      /* ===== Mobile tweaks ===== */
      @media (max-width: 980px) {
        .leftCol {
          order: 2;
        }
        .hero {
          order: 1;
        }
        .rightCol {
          order: 3;
          position: static;
        }
        .sideNav {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
        }
        .google {
          margin-top: 6px;
        }
      }

      :focus-visible {
        outline: 2px solid var(--gold);
        outline-offset: 2px;
        border-radius: 8px;
      }
      @media (prefers-reduced-motion: reduce) {
        * {
          transition: none !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- Top -->
    <div class="top">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span> GoldenSpaceAI
      </div>
      <div class="spacer"></div>
      <div class="toplinks" aria-label="Shortcuts">
        <a href="/advanced-ai.html">Advanced AI</a>
        <a href="/search-info.html">Search Info</a>
        <a href="/learn-physics.html">Learn Physics</a>
        <a href="/create-planet.html">Create Planet</a>
        <a href="/plans.html">Plans</a>
      </div>
    </div>

    <main class="wrap">
      <section class="layout" aria-label="Homepage">
        <!-- Left: feature tiles -->
        <aside class="leftCol" aria-label="Highlights">
          <div class="tile">
            <h3>üß† Advanced AI Assistant</h3>
            <p>
              Company-grade chat experience with voice, camera preview, and
              plan-aware limits.
            </p>
          </div>
          <div class="tile">
            <h3>üîé Search Information</h3>
            <p>
              Clean summaries and topic chips in a golden theme ‚Äî powered by
              Gemini.
            </p>
          </div>
          <div class="tile">
            <h3>üìò Learn Physics</h3>
            <p>
              Curated notes, calculators, and worked examples ‚Äî with an optional
              Gemini helper.
            </p>
          </div>
          <div class="tile">
            <h3>ü™ê Create Your Planet</h3>
            <p>Design oceans, rings, moons ‚Äî export your world as JSON.</p>
          </div>
        </aside>

        <!-- Center: hero -->
        <section class="hero" aria-label="Welcome">
          <h1>
            Welcome to <span style="color: var(--gold)">GoldenSpaceAI</span>
          </h1>
          <p>
            Your all-in-one space companion: ask our Advanced AI, explore
            knowledge, learn physics with tools, and design entire worlds ‚Äî all
            in a golden suit.
          </p>

          <div class="cta">
            <a
              class="btn gold"
              href="/advanced-ai.html"
              aria-label="Launch Advanced AI"
              >Launch Advanced AI ‚ú®</a
            >
            <a class="btn ghost" href="/plans.html" aria-label="View plans"
              >View Plans</a
            >
            <a
              class="btn ghost"
              href="/search-info.html"
              aria-label="Quick search"
              >Quick Search</a
            >
          </div>

          <div class="quickRow" style="margin-top: 14px">
            <span class="chip">Private by design</span>
            <span class="chip">Server-secured Gemini</span>
            <span class="chip">Mobile & laptop ready</span>
          </div>
        </section>

        <!-- Right: vertical nav + Google -->
        <aside class="rightCol" aria-label="Navigate">
          <nav class="sideNav">
            <a class="navbtn" href="/advanced-ai.html">Advanced AI</a>
            <a class="navbtn" href="/search-info.html">Search Info</a>
            <a class="navbtn" href="/learn-physics.html">Learn Physics</a>
            <a class="navbtn" href="/create-planet.html">Create Planet</a>
            <a class="navbtn" href="/plans.html">See Plans</a>
          </nav>

          <!-- Google sign-in (wire this to your backend route) -->
          <a
            class="google"
            href="/auth/google"
            aria-label="Continue with Google"
          >
            <img
              src="https://developers.google.com/identity/images/g-logo.png"
              alt=""
            />
            Continue with Google
          </a>
        </aside>
      </section>
    </main>
    <script>
      (async () => {
        try {
          const res = await fetch("/me", { credentials: "include" });
          const { user } = await res.json();
          const btn = document.querySelector(".google"); // your login button

          if (user && btn) {
            const pill = document.createElement("div");
            pill.style.display = "flex";
            pill.style.alignItems = "center";
            pill.style.gap = "10px";
            pill.style.padding = "10px 12px";
            pill.style.borderRadius = "999px";
            pill.style.background = "rgba(255,255,255,.08)";
            pill.style.border = "1px solid #1f2a40";
            pill.innerHTML = `
        <img src="${user.photo || ""}" alt="" style="width:22px;height:22px;border-radius:50%;object-fit:cover"/>
        <span style="font-weight:800">${user.name || "Signed in"}</span>
        <a href="/auth/logout" style="margin-left:8px;color:#cfc6a5;text-decoration:none;font-weight:800">Logout</a>
      `;
            btn.replaceWith(pill);
          }
        } catch {}
      })();
    </script>
    <footer role="contentinfo">
      <div>
        ¬©Ô∏è <span id="yr"></span> GoldenSpaceAI ‚Äî Built with stardust and
        ambition.
      </div>
      <div>
        <a href="/privacy.html">Privacy</a> ¬∑ <a href="/terms.html">Terms</a> ¬∑
        <a href="/contact.html">Contact</a>
      </div>
    </footer>

    <script>
      document.getElementById("yr").textContent = new Date().getFullYear();
    </script>
    <script>
      async function loadUserBadge() {
        try {
          const res = await fetch('/me', { credentials: 'include' });
          if (!res.ok) throw new Error('not ok');
          const data = await res.json();

          const planTag = document.getElementById('planTag');
          const quotaLine = document.getElementById('quotaLine');

          if (!data.user) {
            planTag.innerHTML = 'Plan: <b>Guest</b>';
            quotaLine.textContent = 'Sign in to track usage';
            return;
          }

          const { plan, usage } = data;
          planTag.innerHTML = ‚Å†‚ÄØPlan: <b>${(plan || '').toUpperCase()}</b>‚ÄØ‚Å†;

          if (usage?.remaining) {
            const r = usage.remaining;
            quotaLine.textContent =
              `Today ‚Äî Ask: ${Number.isFinite(r.ask) ? r.ask : '‚àû'}, ` +
              `Search: ${Number.isFinite(r.search) ? r.search : '‚àû'}, ` +
              ‚Å†‚ÄØPhysics: ${Number.isFinite(r.physics) ? r.physics : '‚àû'}‚ÄØ‚Å†;
          } else {
            quotaLine.textContent = 'Usage data unavailable';
          }
        } catch (e) {
          console.warn('Badge load failed', e);
          const q = document.getElementById('quotaLine');
          if (q) q.textContent = 'Unable to load usage';
        }
      }
      loadUserBadge();
    </script>
  </body>
</html>
<div id="userBadge" style="margin: 8px 0 0; font-size: 13px">
  <span
    id="planTag"
    style="
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: #0f1520;
    "
  >
    Plan: <b>‚Äî</b>
  </span>
  <span id="quotaLine" style="margin-left: 10px; opacity: 0.85"
    >Loading limits‚Ä¶</span
  >
</div>
<div id="userBadge" style="margin:10px; font-size:14px; color:white;">
  <span id="userInfo"></span>
  <button id="logoutBtn" style="margin-left:10px; display:none;">Logout</button>
</div>

<script>
async function loadUser() {
  try {
    const res = await fetch("/api/me");
    const data = await res.json();
    if (data.loggedIn) {
      document.getElementById("userInfo").innerHTML = `
        <img src="${data.user.photo}" 
             style="width:28px; height:28px; border-radius:50%; vertical-align:middle; margin-right:6px;">
        ${data.user.name} (${data.plan})
      `;
      document.getElementById("logoutBtn").style.display = "inline-block";
    } else {
      document.getElementById("userInfo").innerHTML = 
        '<a href="/auth/google">Sign in with Google</a>';
    }
  } catch (e) {
    console.error("Failed to load /api/me", e);
  }
}

document.getElementById("logoutBtn").onclick = async () => {
  await fetch("/logout", { method: "POST" });
  window.location.reload();
};

loadUser();
</script>
